<!DOCTYPE html>
<html lang="en" dir="ltr" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Kate Romero's Portfolio: Homepage</title>

    <meta name="description" content="The homepage of Kate Romero's professional portfolio">
    <meta name="author" content="Kate Romero">
    <meta name="GitHub:site" content="@kate-romero">
    <meta name="LinkedIn:site" content="@romerokate">

    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="styles/variables.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comme:wght@100..900&display=swap" rel="stylesheet">

    <style>
        * {
            font-family: "Comme", sans-serif;
        }

        main {
            display: flex;
            flex-direction: column;
            gap:        2rem;
            margin: 1.5rem 0 4.5rem 0;

            & > * {
                -outline: red solid 1px;
            }
            
        }
        

        pre, section {
            -outline: red solid 1px;
            padding: 1rem 10%;
        }

        hgroup {
            text-align: center;
            padding: 0 12vw;
            display: flex;
            flex-direction: column;
            gap: .5rem;
        }

        pre{
            align-self: center;
            background-color: var(--color-accent2, black);
            border-radius: 12px;
            code {
                color: var(--color-acc-text, white);
                background-color: var(--color-accent2, black);
            }
        }

        section {
            width: 80vw;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 1rem;

            & > * {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            &:has(address) {
                align-self: start;
                border-radius: 0 16px 16px 0;
                background-color: var(--color-accent3, black);
                * {
                    background-color: var(--color-accent3, black);
                    color: var(--color-acc-text, white);
                }
            }

            &:has(form) {
                align-self: end;
                border-radius: 16px 0 0 16px;
                background-color: var(--color-accent4, black);
                * {
                    background-color: var(--color-accent4, black);
                    color: var(--color-acc-text, white);
                }
                input, textarea {
                    background-color: var(--color-background, white);
                    color: --color-bg-text;
                }
            }

        }

        form {
            display: flex;
            flex-direction: column;

            label {
                white-space: nowrap;
                &:has([required])::before {
                    content: "(*) ";
                    color: var(--color-acc-text, white);
                }
            }

            input, textarea, button {
                margin: 5px;
                padding: 0.5rem;
                border-radius: 8px;
                border: 1px solid --color-bg-text;
            }

            textarea {
                min-width: 50%;
                max-width: 80%;
                height: 6rem;
            }

            fieldset {
            border: 0;
            display: flex;
            flex-direction: column;
            -border: 1px solid blue;
            align-self: center;
            

            div {
                -border: 1px solid red;
                align-self: self-start;
            }
            

            legend {
                font-weight: bold;
            }

        }

            button {
                background-color: var(--color-accent2, black);
                color: var(--color-acc-text, white);
                width: 30ch;
                align-self: center;
                cursor: pointer;
                &:hover {
                    background-color: var(--color-accent1, black);
                }
            }

            input:focus {
                outline: 2px solid var(--color-accent1, black);
                outline-offset: 2px;
            }

            input:user-invalid {
                background-color: var(--color-error-bg, red);
                outline: 2px solid var(--color-error-outline, red);
                outline-offset: 2px;
            }

            input:focus:invalid {
                background-color: var(--color-background, white);
            }

        }

        .error {
            display: none;
        }

        .warn-flash-off {
            background-color: var(--color-background, white) !important;
        }

        .warning-flash-on {
            background-color: var(--color-error-bg, red) !important;
        }

        .warn-approach-char-limit {
            background-color: var(--color-warning-bg, yellow) !important;
        }

        footer {
            background-color: var(--color-accent1, black);
            text-align: right;

            position: fixed;
            bottom: 0;
            transform-origin: left;
            width: 100vw;

            animation: scrollProgress auto linear;
            animation-timeline: scroll(root);
        }

        #scroll-progress {
            top: 0;
            left: 0;
            height: 4px;
            background-color: var(--color-accent1, black);
            width: 100vw;

            position: fixed;
            transform: scaleX(0);
            transform-origin: left;
            animation: scrollProgress auto linear;
            animation-timeline: scroll(root);
        }

        @keyframes scrollProgress {
            0% { transform: scaleX(0); }
            100% { transform: scaleX(1); }
        }

        footer p {
            padding: 0.5rem 3ch;
            background-color: var(--color-accent1, black);
            color: var(--color-accent1, black);
            display: inline-block;

            
        }

        #thanks-message {
            /* display: inline-block; */
            background-color: rgba(0, 0, 0, 0);
            color: var(--color-acc-text, white);
            position: fixed;
            bottom: 0.5rem;
            right: 1.25ch;
            z-index: 1;

            animation: slideInText auto linear;
            animation-timeline: scroll(root);
        }

        @keyframes slideInText {
            0% { transform: translateX(-100vw); }
            100% { transform: translateX(0); }
        }


    </style>
</head>

<body>

    <header>

        <nav>
            <ul>
                <li><a href="./home.html">Home</a></li>
                <li><a href="./projects.html">Projects</a></li>
                <li><a href="./work-experience.html">Work Experience</a></li>
            </ul>
        </nav>

        <div>
            <h1>Kate Romero's Portfolio: <span>Home</span></h1>
            <button
                type="button"
                data-theme-toggle
                aria-label="Toggle Theme"
            >☀️</button>
        </div>

    </header>

    <main>

        <hgroup>
            <h2>About Me</h2>
            <p>
                Embedded systems intern with experience developing low-level firmware
                on STM32 and RP2040 platforms. Skilled in C/C++, sensor integration 
                (I2C, SPI, UART), and debugging with GDB and logic analyzers. 
                Passionate about low-power systems and real-time embedded design.
            </p>
            <p>
                Experienced tutor and instructor for <em>kinder - university.</em> 
                Dedicated to bringing CS Education to <em><strong>all</strong></em>
            </p>
        </hgroup>

        <pre><code>#include &lt;stdio.h&gt;<br>int main() {<br>    printf("Hello, World!");<br>    return 0;<br>}</code></pre>
        
        <section>
            <h2>Contact Me</h2>

            <address>
                <p>Email: <a href="mailto:kgromero@ucsd.edu">kgromero@ucsd.edu</a></p>
                <p>LinkedIn: <a href="https://www.linkedin.com/in/romerokate/">linkedin.com/in/romerokate/</a></p>
                <p>GitHub: <a href="https://github.com/kate-romero">github.com/kate-romero</a></p>
            </address>
        </section>

        <section>
            <h2>Have Me Contact You</h2>

            <form action="https://httpbin.org/post" method="post">

                <div>
                    <label>Name:
                        <input type="text" name="name" maxlength="50" autofocus required pattern="^[A-Za-z\s\-']+$" title="Only letters, spaces, hyphens, and apostrophes allowed.">
                    </label>

                    <label>Email:
                        <input type="email" name="email" maxlength="30" required>
                    </label>

                    <label>Call:
                        <input type="tel" name="call" maxlength="20" pattern="^[0-9+\-\s\(\)]*$" title="Only numbers, spaces, parentheses, plus and hyphens allowed.">
                    </label>

                    <label>Text:
                        <input type="tel" name="text" maxlength="20" pattern="^[0-9+\-\s\(\)]*$" title="Only numbers, spaces, parentheses, plus and hyphens allowed.">
                    </label>
                </div>

                <fieldset>
                    <legend>Reason For Reaching Out:</legend>

                    <div>
                        <input type="checkbox" name="industry_position" id="industry" value="industry">
                        <label for="industry">Industry Position</label>
                    </div>

                    <div>
                        <input type="checkbox" name="teaching_position" id="teach" value="teach">
                        <label for="teach">Teaching Position</label>
                    </div>

                    <div>
                        <input type="checkbox" name="contract_work" id="contract" value="contract">
                        <label for="contract">Contract Work</label>
                    </div>

                    <div>
                        <input type="checkbox" name="other" id="other" value="other">
                        <label for="other">Other</label>
                    </div>
                </fieldset>

                <label for="comments">Comments:<br>
                    <textarea id="comments" name="comments" maxlength="1300"></textarea>
                </label>

                <input type="hidden" name="possible_bot" value="true">  <!-- TODO: Implement bot detection? -->
                <input type="hidden" name="form_errors">

                <h3 class="error">Error:</h3>
                <output class="error" id="formErrors"></output>
                <output id="formInfo"></output>

                <button type="submit">Submit</button>
            </form>

            

        </section>

        <p id="thanks-message">Thanks for visiting!</p>

        <script>
            // Define a new custom element called <hello-world>
            class HelloWorld extends HTMLElement {
                connectedCallback() {
                    console.log("Hello, World!");
                }
            }

            // Register the custom element
            customElements.define('hello-world', HelloWorld);
        </script>
        
    </main>

    <footer>
        <hello-world></hello-world>
        <p>Thanks for visiting!</p>
    </footer>

    <script>
        const name = document.querySelector('input[name="name"]');
        const email = document.querySelector('input[name="email"]');
        const call = document.querySelector('input[name="call"]');
        const text = document.querySelector('input[name="text"]');
        const comments = document.querySelector('textarea[name="comments"]');
        const form = document.querySelector('form');
        const formErrors = document.querySelector('input[name="form_errors"]');
        const possibleBot = document.querySelector('input[name="possible_bot"]');

        let warningFlashInterval;
        let flashInProgress = false;  // TODO: debug; need atomic assignment?
        let form_errors = new Array();

        document.addEventListener('DOMContentLoaded', (event) => {
            displayCharCount(comments);
        });

        name.addEventListener('input', (event) => {
            if (name.validity.valueMissing) {
                name.setCustomValidity("You must enter your name.");
            } else if (name.validity.patternMismatch) {
                name.setCustomValidity("Your name must only contain letters, spaces, hyphens, and apostrophes.");
                name.value = name.value.slice(0, -1);
                warnIllegalChar(name.validationMessage, name);
            } else if (name.validity.tooLong) {
                name.setCustomValidity("Your name must not exceed 50 characters.");
                warnIllegalChar(name.validationMessage, name);
            } else {
                name.setCustomValidity("");
            }
            form_errors.push(name.validationMessage);
        });

        email.addEventListener('input', (event) => {
            if (email.validity.valueMissing) {
                email.setCustomValidity("You must enter your email.");
                form_errors.push(email.validationMessage);
            } else if (email.validity.typeMismatch) {
                email.setCustomValidity("Please enter a valid email address.");
            } else if (email.validity.tooLong) {
                email.setCustomValidity("Your email must not exceed 30 characters.");
                warnIllegalChar(email.validationMessage, email);
                form_errors.push(email.validationMessage);
            } else {
                email.setCustomValidity("");
            }
        });

        call.addEventListener('input', (event) => {
            if (call.validity.patternMismatch) {
                call.setCustomValidity("Your phone number (call) must only contain numbers, spaces, parentheses, plus, and hyphens.");
                call.value = call.value.slice(0, -1);
                warnIllegalChar(call.validationMessage, call);
            } else if (call.validity.tooLong) {
                call.setCustomValidity("Your phone number (call) must not exceed 20 characters.");
                warnIllegalChar(call.validationMessage, call);
            } else {
                call.setCustomValidity("");
            }
            form_errors.push(call.validationMessage);
        });

        text.addEventListener('input', (event) => {
            if (text.validity.patternMismatch) {
                text.setCustomValidity("Your phone number (text) must only contain numbers, spaces, parentheses, plus, and hyphens.");
                text.value = text.value.slice(0, -1);
                warnIllegalChar(text.validationMessage, text);
            } else if (text.validity.tooLong) {
                text.setCustomValidity("Your phone number (text) must not exceed 20 characters.");
                warnIllegalChar(text.validationMessage, text);
            } else {
                text.setCustomValidity("");
            }
            form_errors.push(text.validationMessage);
        });

        comments.addEventListener('input', (event) => {
            if (comments.validity.tooLong) {
                comments.setCustomValidity("Your comment must not exceed 1300 characters.");
                warnIllegalChar(comments.validationMessage, comments);
            } else {
                comments.setCustomValidity("");
            }
            displayCharCount(comments);
            form_errors.push(comments.validationMessage);
        });

        form.addEventListener('submit', (event) => {
            formErrors.value = form_errors.filter(Boolean).join('\n');
        });

        document.addEventListener('keydown', (event) => {
            possibleBot.value = "false";
        });

        function warnIllegalChar(message, inputElement) {

            document.getElementsByClassName("error")[0].style.display = "block";
            document.getElementsByClassName("error")[1].style.display = "block";

            document.getElementById("formErrors").textContent = message;

            setTimeout(function() {
                document.getElementById("formErrors").textContent = "";
                document.getElementsByClassName("error")[0].style.display = "none";
                document.getElementsByClassName("error")[1].style.display = "none";
            }, 3000);

            if (!flashInProgress) {
                flashInProgress = true;

                startWarningFlash(inputElement);
                setTimeout(function() {
                    stopWarningFlash(inputElement);
                }, 3000);

                flashInProgress = false;
            }
            
        }

        function startWarningFlash(inputElement) {
            inputElement.classList.add("warning-flash-on");
            inputElement.classList.remove("warn-flash-off");
            warningFlashInterval = setInterval(function() {
                inputElement.classList.toggle("warning-flash-on");
                inputElement.classList.toggle("warn-flash-off");
            }, 500);
        }

        function stopWarningFlash(inputElement) {
            clearInterval(warningFlashInterval);
            inputElement.classList.remove("warning-flash-on");
            inputElement.classList.remove("warn-flash-off");
        }

        function displayCharCount(inputElement) {
            const charCount = inputElement.value.length;
            const maxLength = inputElement.getAttribute("maxlength");
            document.getElementById("formInfo").textContent = `Comment character count: ${charCount}/${maxLength}`;

            if (charCount > 1000) {
                inputElement.classList.add("warn-approach-char-limit");
            } else {
                inputElement.classList.remove("warn-approach-char-limit");
            }
        }

        // Theme Toggle
        const button = document.querySelector("[data-theme-toggle]");
        let currentThemeSetting = localStorage.getItem("theme") || "light";

        document.querySelector("html").setAttribute("data-theme", currentThemeSetting);
        let icon = (currentThemeSetting == "dark") ? "🌙" : "☀️";
        button.innerText = icon;

        button.addEventListener("click", (event) => {
        const newTheme = (currentThemeSetting == "dark") ? "light" : "dark";
        const newIcon = (newTheme == "dark") ? "🌙" : "☀️";
        button.innerText = newIcon;
        document.querySelector("html").setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);
        currentThemeSetting = newTheme;
        });

    </script>

</body>
</html>